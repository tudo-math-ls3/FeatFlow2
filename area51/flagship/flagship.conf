# Application configuration file

# Model: TRANSPORT
TRANSP_USE_IBP="YES"

# Model: HYDRO
HYDRO_USE_IBP="YES"
HYDRO_USE_ENTROPYFIX="YES"
HYDRO_GAMMA="1.4"

# Model: MHD
MHD_USE_IBP="YES"
MHD_USE_ENTROPYFIX="YES"
MHD_GAMMA="1.4"
MHD_VACUUM_PERM="1.0"
MHD_X_MAGNETICFIELD_CONSTANT_1D="3.0/4.0"

# Optimised configuration flags for large problems
LINALG_NMIN_OMP="32*120"
LSYSSC_NEQMIN_OMP="32*100"
AFCSTAB_NEDGEMIN_OMP="32*100"
GFSC_NEQMIN_OMP="32*150"
GFSC_NEDGEMIN_OMP="32*120"
GFSYS_NEQMIN_OMP="32*150"
GFSYS_NEDGEMIN_OMP="32*120"
BILF_NELEMSIM="32*160"
LINF_NELEMSIM="32*1"
GFSC_NEQSIM="32*50"
GFSC_NEDGESIM="32*25"
GFSYS_NEQSIM="32*50"
GFSYS_NEDGESIM="32*25"
FPAR_NITEMSIM="32*130"

#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#
#-#-#-#-#                 DO NOT EDIT THE LINES BELOW                #-#-#-#-#
#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#-#

# Start with non-optional apponly flags
APPONLYFLAGS="-DUSE_PREPROC_F90CPP"
MESSAGE=""

# Add flags for transport model
if [ -n "$TRANSP_USE_IBP" -a "$TRANSP_USE_IBP" = "YES" ]
then
  APPONLYFLAGS="$APPONLYFLAGS,-DTRANSP_USE_IBP"
  MESSAGE="\nTRANSP_USE_IBP = YES"
else
  MESSAGE="\nTRANSP_USE_IBP = NO"
fi

# Add flags for hydrodynamic model
if [ -n "$HYDRO_USE_IBP" -a "$HYDRO_USE_IBP" = "YES" ]
then
  APPONLYFLAGS="$APPONLYFLAGS,-DHYDRO_USE_IBP"
  MESSAGE="$MESSAGE\nHYDRO_USE_IBP = YES"
else
  MESSAGE="$MESSAGE\nHYDRO_USE_IBP = NO"
fi

if [ -n "$HYDRO_USE_ENTROPYFIX" -a "$HYDRO_USE_ENTROPYFIX" = "YES" ]
then
  APPONLYFLAGS="$APPONLYFLAGS,-DHYDRO_USE_ENTROPYFIX"
  MESSAGE="$MESSAGE\nHYDRO_USE_ENTROPYFIX = YES"
else
  MESSAGE="$MESSAGE\nHYDRO_USE_ENTROPYFIX = NO"
fi

if [ -n "$HYDRO_GAMMA" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DHYDRO_GAMMA=${HYDRO_GAMMA}"
    MESSAGE="$MESSAGE\nHYDRO_GAMMA = ${HYDRO_GAMMA}"
fi

# Add flags for MHD model
if [ -n "$MHD_USE_IBP" -a "$MHD_USE_IBP" = "YES" ]
then
  APPONLYFLAGS="$APPONLYFLAGS,-DMHD_USE_IBP"
  MESSAGE="$MESSAGE\nMHD_USE_IBP = YES"
else
  MESSAGE="$MESSAGE\nMHD_USE_IBP = NO"
fi

if [ -n "$MHD_USE_ENTROPYFIX" -a "$MHD_USE_ENTROPYFIX" = "YES" ]
then
  APPONLYFLAGS="$APPONLYFLAGS,-DMHD_USE_ENTROPYFIX"
  MESSAGE="$MESSAGE\nMHD_USE_ENTROPYFIX = YES"
else
  MESSAGE="$MESSAGE\nMHD_USE_ENTROPYFIX = NO"
fi

if [ -n "$MHD_GAMMA" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DMHD_GAMMA=${MHD_GAMMA}"
    MESSAGE="$MESSAGE\nMHD_GAMMA = ${MHD_GAMMA}"
fi

if [ -n "$MHD_VACUUM_PERM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DMHD_VACUUM_PERM=${MHD_VACUUM_PERM}"
    MESSAGE="$MESSAGE\nMHD_VACUUM_PERM = ${MHD_VACUUM_PERM}"
fi

if [ -n "$MHD_X_MAGNETICFIELD_CONSTANT_1D" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DMHD_X_MAGNETICFIELD_CONSTANT_1D=${MHD_X_MAGNETICFIELD_CONSTANT_1D}"
    MESSAGE="$MESSAGE\nMHD_X_MAGNETICFIELD_CONSTANT_1D = ${MHD_X_MAGNETICFIELD_CONSTANT_1D}"
fi

# Add optimised configuration flags for blocking and OpenMP parallelisation
if [ -n "LINALG_NMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DLINALG_NMIN_OMP=${LINALG_NMIN_OMP}"
    MESSAGE="$MESSAGE\nLINALG_NMIN_OMP = ${LINALG_NMIN_OMP}"
fi

if [ -n "LSYSSC_NEQMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DLSYSSC_NEQMIN_OMP=${LSYSSC_NEQMIN_OMP}"
    MESSAGE="$MESSAGE\nLSYSSC_NEQMIN_OMP = ${LSYSSC_NEQMIN_OMP}"
fi

if [ -n "AFCSTAB_NEDGEMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DAFCSTAB_NEDGEMIN_OMP=${AFCSTAB_NEDGEMIN_OMP}"
    MESSAGE="$MESSAGE\nAFCSTAB_NEDGEMIN_OMP = ${AFCSTAB_NEDGEMIN_OMP}"
fi

if [ -n "GFSC_NEQMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSC_NEQMIN_OMP=${GFSC_NEQMIN_OMP}"
    MESSAGE="$MESSAGE\nGFSC_NEQMIN_OMP = ${GFSC_NEQMIN_OMP}"
fi

if [ -n "GFSC_NEDGEMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSC_NEDGEMIN_OMP=${GFSCS_NEDGEMIN_OMP}"
    MESSAGE="$MESSAGE\nGFSC_NEDGEMIN_OMP = ${GFSC_NEDGEMIN_OMP}"
fi

if [ -n "GFSYS_NEQMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSYS_NEQMIN_OMP=${GFSYS_NEQMIN_OMP}"
    MESSAGE="$MESSAGE\nGFSYS_NEQMIN_OMP = ${GFSYS_NEQMIN_OMP}"
fi

if [ -n "GFSYS_NEDGEMIN_OMP" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSYS_NEDGEMIN_OMP=${GFSYS_NEDGEMIN_OMP}"
    MESSAGE="$MESSAGE\nGFSYS_NEDGEMIN_OMP = ${GFSYS_NEDGEMIN_OMP}"
fi

if [ -n "BILF_NELEMSIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DBILF_NELEMSIM=${BILF_NELEMSIM}"
    MESSAGE="$MESSAGE\nBILF_NELEMSIM = ${BILF_NELEMSIM}"
fi

if [ -n "LINF_NELEMSIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DLINF_NELEMSIM=${LINF_NELEMSIM}"
    MESSAGE="$MESSAGE\nLINF_NELEMSIM = ${LINF_NELEMSIM}"
fi

if [ -n "GFSC_NEQSIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSC_NEQSIM=${GFSC_NEQSIM}"
    MESSAGE="$MESSAGE\nGFSC_NEQSIM = ${GFSC_NEQSIM}"
fi

if [ -n "GFSC_NEDGESIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSC_NEDGESIM=${GFSC_NEDGESIM}"
    MESSAGE="$MESSAGE\nGFSC_NEDGESIM = ${GFSC_NEDGESIM}"
fi

if [ -n "GFSYS_NEQSIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSYS_NEQSIM=${GFSYS_NEQSIM}"
    MESSAGE="$MESSAGE\nGFSYS_NEQSIM = ${GFSYS_NEQSIM}"
fi

if [ -n "GFSYS_NEDGESIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DGFSYS_NEDGESIM=${GFSYS_NEDGESIM}"
    MESSAGE="$MESSAGE\nGFSYS_NEDGESIM = ${GFSYS_NEDGESIM}"
fi

if [ -n "FPAR_NITEMSIM" ]
then
    APPONLYFLAGS="$APPONLYFLAGS,-DFPAR_NITEMSIM=${FPAR_NITEMSIM}"
    MESSAGE="$MESSAGE\nFPAR_NITEMSIM = ${FPAR_NITEMSIM}"
fi
