# Script to generate the reference tests for the bench2 test.
#
# The script generates a FBDEF file and a couple of FBCONF files with all test 
# IDs. The tests are created in such a way, that every test calculates
# a small amount of the time scale and saves the final solution. A consecutive
# test can then conntinue based on the previously calculated solution.
# Therefore, all tests in one FBCONF file have to be consecutively executed!
# Afterwards, the drag/lift values have to be cut together (except the first
# two lines which contain old data).
#
# Execute this script in the benchmark directory!

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step1.fbgen ./tests/cc2d_bench2_q1t_reference1.fbdef ./tests/cc2d_bench2_q1t_reference1.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step2.fbgen ./tests/cc2d_bench2_q1t_reference2.fbdef ./tests/cc2d_bench2_q1t_reference2.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step3_lv2.fbgen ./tests/cc2d_bench2_q1t_reference3_lv2.fbdef ./tests/cc2d_bench2_q1t_reference3_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step3_lv3.fbgen ./tests/cc2d_bench2_q1t_reference3_lv3.fbdef ./tests/cc2d_bench2_q1t_reference3_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step3_lv4.fbgen ./tests/cc2d_bench2_q1t_reference3_lv4.fbdef ./tests/cc2d_bench2_q1t_reference3_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step3_lv5.fbgen ./tests/cc2d_bench2_q1t_reference3_lv5.fbdef ./tests/cc2d_bench2_q1t_reference3_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step3_lv6.fbgen ./tests/cc2d_bench2_q1t_reference3_lv6.fbdef ./tests/cc2d_bench2_q1t_reference3_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt1_lv2.fbgen ./tests/cc2d_bench2_q1t_reference4_dt1_lv2.fbdef ./tests/cc2d_bench2_q1t_reference4_dt1_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt1_lv3.fbgen ./tests/cc2d_bench2_q1t_reference4_dt1_lv3.fbdef ./tests/cc2d_bench2_q1t_reference4_dt1_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt1_lv4.fbgen ./tests/cc2d_bench2_q1t_reference4_dt1_lv4.fbdef ./tests/cc2d_bench2_q1t_reference4_dt1_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt1_lv5.fbgen ./tests/cc2d_bench2_q1t_reference4_dt1_lv5.fbdef ./tests/cc2d_bench2_q1t_reference4_dt1_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt1_lv6.fbgen ./tests/cc2d_bench2_q1t_reference4_dt1_lv6.fbdef ./tests/cc2d_bench2_q1t_reference4_dt1_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt2_lv2.fbgen ./tests/cc2d_bench2_q1t_reference4_dt2_lv2.fbdef ./tests/cc2d_bench2_q1t_reference4_dt2_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt2_lv3.fbgen ./tests/cc2d_bench2_q1t_reference4_dt2_lv3.fbdef ./tests/cc2d_bench2_q1t_reference4_dt2_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt2_lv4.fbgen ./tests/cc2d_bench2_q1t_reference4_dt2_lv4.fbdef ./tests/cc2d_bench2_q1t_reference4_dt2_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt2_lv5.fbgen ./tests/cc2d_bench2_q1t_reference4_dt2_lv5.fbdef ./tests/cc2d_bench2_q1t_reference4_dt2_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt2_lv6.fbgen ./tests/cc2d_bench2_q1t_reference4_dt2_lv6.fbdef ./tests/cc2d_bench2_q1t_reference4_dt2_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt3_lv2.fbgen ./tests/cc2d_bench2_q1t_reference4_dt3_lv2.fbdef ./tests/cc2d_bench2_q1t_reference4_dt3_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt3_lv3.fbgen ./tests/cc2d_bench2_q1t_reference4_dt3_lv3.fbdef ./tests/cc2d_bench2_q1t_reference4_dt3_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt3_lv4.fbgen ./tests/cc2d_bench2_q1t_reference4_dt3_lv4.fbdef ./tests/cc2d_bench2_q1t_reference4_dt3_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt3_lv5.fbgen ./tests/cc2d_bench2_q1t_reference4_dt3_lv5.fbdef ./tests/cc2d_bench2_q1t_reference4_dt3_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt3_lv6.fbgen ./tests/cc2d_bench2_q1t_reference4_dt3_lv6.fbdef ./tests/cc2d_bench2_q1t_reference4_dt3_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt4_lv2.fbgen ./tests/cc2d_bench2_q1t_reference4_dt4_lv2.fbdef ./tests/cc2d_bench2_q1t_reference4_dt4_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt4_lv3.fbgen ./tests/cc2d_bench2_q1t_reference4_dt4_lv3.fbdef ./tests/cc2d_bench2_q1t_reference4_dt4_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt4_lv4.fbgen ./tests/cc2d_bench2_q1t_reference4_dt4_lv4.fbdef ./tests/cc2d_bench2_q1t_reference4_dt4_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt4_lv5.fbgen ./tests/cc2d_bench2_q1t_reference4_dt4_lv5.fbdef ./tests/cc2d_bench2_q1t_reference4_dt4_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q1t_step4_dt4_lv6.fbgen ./tests/cc2d_bench2_q1t_reference4_dt4_lv6.fbdef ./tests/cc2d_bench2_q1t_reference4_dt4_lv6.fbconf


#####

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step1.fbgen ./tests/cc2d_bench2_q2_reference1.fbdef ./tests/cc2d_bench2_q2_reference1.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step2.fbgen ./tests/cc2d_bench2_q2_reference2.fbdef ./tests/cc2d_bench2_q2_reference2.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step3_lv2.fbgen ./tests/cc2d_bench2_q2_reference3_lv2.fbdef ./tests/cc2d_bench2_q2_reference3_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step3_lv3.fbgen ./tests/cc2d_bench2_q2_reference3_lv3.fbdef ./tests/cc2d_bench2_q2_reference3_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step3_lv4.fbgen ./tests/cc2d_bench2_q2_reference3_lv4.fbdef ./tests/cc2d_bench2_q2_reference3_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step3_lv5.fbgen ./tests/cc2d_bench2_q2_reference3_lv5.fbdef ./tests/cc2d_bench2_q2_reference3_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step3_lv6.fbgen ./tests/cc2d_bench2_q2_reference3_lv6.fbdef ./tests/cc2d_bench2_q2_reference3_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt1_lv2.fbgen ./tests/cc2d_bench2_q2_reference4_dt1_lv2.fbdef ./tests/cc2d_bench2_q2_reference4_dt1_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt1_lv3.fbgen ./tests/cc2d_bench2_q2_reference4_dt1_lv3.fbdef ./tests/cc2d_bench2_q2_reference4_dt1_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt1_lv4.fbgen ./tests/cc2d_bench2_q2_reference4_dt1_lv4.fbdef ./tests/cc2d_bench2_q2_reference4_dt1_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt1_lv5.fbgen ./tests/cc2d_bench2_q2_reference4_dt1_lv5.fbdef ./tests/cc2d_bench2_q2_reference4_dt1_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt1_lv6.fbgen ./tests/cc2d_bench2_q2_reference4_dt1_lv6.fbdef ./tests/cc2d_bench2_q2_reference4_dt1_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt2_lv2.fbgen ./tests/cc2d_bench2_q2_reference4_dt2_lv2.fbdef ./tests/cc2d_bench2_q2_reference4_dt2_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt2_lv3.fbgen ./tests/cc2d_bench2_q2_reference4_dt2_lv3.fbdef ./tests/cc2d_bench2_q2_reference4_dt2_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt2_lv4.fbgen ./tests/cc2d_bench2_q2_reference4_dt2_lv4.fbdef ./tests/cc2d_bench2_q2_reference4_dt2_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt2_lv5.fbgen ./tests/cc2d_bench2_q2_reference4_dt2_lv5.fbdef ./tests/cc2d_bench2_q2_reference4_dt2_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt2_lv6.fbgen ./tests/cc2d_bench2_q2_reference4_dt2_lv6.fbdef ./tests/cc2d_bench2_q2_reference4_dt2_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt3_lv2.fbgen ./tests/cc2d_bench2_q2_reference4_dt3_lv2.fbdef ./tests/cc2d_bench2_q2_reference4_dt3_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt3_lv3.fbgen ./tests/cc2d_bench2_q2_reference4_dt3_lv3.fbdef ./tests/cc2d_bench2_q2_reference4_dt3_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt3_lv4.fbgen ./tests/cc2d_bench2_q2_reference4_dt3_lv4.fbdef ./tests/cc2d_bench2_q2_reference4_dt3_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt3_lv5.fbgen ./tests/cc2d_bench2_q2_reference4_dt3_lv5.fbdef ./tests/cc2d_bench2_q2_reference4_dt3_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt3_lv6.fbgen ./tests/cc2d_bench2_q2_reference4_dt3_lv6.fbdef ./tests/cc2d_bench2_q2_reference4_dt3_lv6.fbconf

./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt4_lv2.fbgen ./tests/cc2d_bench2_q2_reference4_dt4_lv2.fbdef ./tests/cc2d_bench2_q2_reference4_dt4_lv2.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt4_lv3.fbgen ./tests/cc2d_bench2_q2_reference4_dt4_lv3.fbdef ./tests/cc2d_bench2_q2_reference4_dt4_lv3.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt4_lv4.fbgen ./tests/cc2d_bench2_q2_reference4_dt4_lv4.fbdef ./tests/cc2d_bench2_q2_reference4_dt4_lv4.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt4_lv5.fbgen ./tests/cc2d_bench2_q2_reference4_dt4_lv5.fbdef ./tests/cc2d_bench2_q2_reference4_dt4_lv5.fbconf
./bin/generate_tests.pl ./tests/cc2d_bench2_reference_q2_step4_dt4_lv6.fbgen ./tests/cc2d_bench2_q2_reference4_dt4_lv6.fbdef ./tests/cc2d_bench2_q2_reference4_dt4_lv6.fbconf


# Tests 1, 2, 3 and 4 must be executed consecutively.
# The tests on each level in test 3 and 4 can be executed in parallel.
# Use appropriate --afterjob modifiers in the scheduling!

# Schedule the tests.

# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference1.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference2.fbconf

# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference3_lv2.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference3_lv3.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference3_lv4.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference3_lv5.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference3_lv6.fbconf

# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference4_lv2.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference4_lv3.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference4_lv4.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference4_lv5.fbconf
# ./bin/lido_schedule_tests2 -w 48:00:00 --consecutive --altmake 1 --vmem 10000 ./tests/cc2d_bench2_q2_reference4_lv6.fbconf
